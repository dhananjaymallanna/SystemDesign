<!doctype html><html lang=en-us dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Design Realtime Claps # Design Realtime Claps Problem Statement Requirements Core Requirements High Level Requirements Micro Requirements Output Design Document Prototype Recommended Tech Stack Keep in mind Outcome You&rsquo;ll learn Share and shoutout Problem Statement # Imagine you have a publishing platform where writers write articles and readers read them. To appreciate the quality content, the readers clap for the article by clicking the clap button present next to the article."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/problems/realtime-claps/"><meta property="og:site_name" content="My New Hugo Site"><meta property="og:title" content="realtime claps"><meta property="og:description" content="Design Realtime Claps # Design Realtime Claps Problem Statement Requirements Core Requirements High Level Requirements Micro Requirements Output Design Document Prototype Recommended Tech Stack Keep in mind Outcome You&amp;rsquo;ll learn Share and shoutout Problem Statement # Imagine you have a publishing platform where writers write articles and readers read them. To appreciate the quality content, the readers clap for the article by clicking the clap button present next to the article."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="problems"><title>realtime claps | My New Hugo Site</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=http://localhost:1313/problems/realtime-claps/><link rel=stylesheet href=/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.310fbdb338b41188497116663ee71d162bd4f105694b5c7c2a4ebe53ff809894.js integrity="sha256-MQ+9szi0EYhJcRZmPucdFivU8QVpS1x8Kk6+U/+AmJQ=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>My New Hugo Site</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=/docs/example/>Example Site</a><ul><li><a href=/docs/example/table-of-contents/>Table of Contents</a><ul><li><a href=/docs/example/table-of-contents/with-toc/>With ToC</a></li><li><a href=/docs/example/table-of-contents/without-toc/>Without ToC</a></li></ul></li><li><input type=checkbox id=section-3049b9efa63db187c30edc63a05cabc2 class=toggle>
<label for=section-3049b9efa63db187c30edc63a05cabc2 class="flex justify-between"><a role=button>Collapsed</a></label><ul><li><a href=/docs/example/collapsed/3rd-level/>3rd Level</a><ul><li><a href=/docs/example/collapsed/3rd-level/4th-level/>4th Level</a></li></ul></li></ul></li></ul></li><li class=book-section-flat><span>Shortcodes</span><ul><li><a href=/docs/shortcodes/buttons/>Buttons</a></li><li><a href=/docs/shortcodes/columns/>Columns</a></li><li><a href=/docs/shortcodes/details/>Details</a></li><li><a href=/docs/shortcodes/expand/>Expand</a></li><li><a href=/docs/shortcodes/hints/>Hints</a></li><li><a href=/docs/shortcodes/mermaid/>Mermaid</a></li><li><input type=checkbox id=section-d4c83c0dd655503a3da63d0c6550ed41 class=toggle>
<label for=section-d4c83c0dd655503a3da63d0c6550ed41 class="flex justify-between"><a href=/docs/shortcodes/section/>Section</a></label><ul><li><a href=/docs/shortcodes/section/first-page/>First Page</a></li><li><a href=/docs/shortcodes/section/second-page/>Second Page</a></li></ul></li><li><a href=/docs/shortcodes/tabs/>Tabs</a></li><li><a href=/docs/shortcodes/katex/>KaTeX</a></li></ul></li></ul><ul><li><a href=/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>realtime claps</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#core-requirements>Core Requirements</a></li><li><a href=#high-level-requirements>High Level Requirements</a></li><li><a href=#micro-requirements>Micro Requirements</a></li></ul><ul><li><a href=#design-document>Design Document</a></li><li><a href=#prototype>Prototype</a><ul><li><a href=#recommended-tech-stack>Recommended Tech Stack</a></li><li><a href=#keep-in-mind>Keep in mind</a></li></ul></li></ul><ul><li><a href=#youll-learn>You&rsquo;ll learn</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=design-realtime-claps>Design Realtime Claps
<a class=anchor href=#design-realtime-claps>#</a></h1><ul><li><a href=#design-realtime-claps>Design Realtime Claps</a></li><li><a href=#problem-statement>Problem Statement</a></li><li><a href=#requirements>Requirements</a><ul><li><a href=#core-requirements>Core Requirements</a></li><li><a href=#high-level-requirements>High Level Requirements</a></li><li><a href=#micro-requirements>Micro Requirements</a></li></ul></li><li><a href=#output>Output</a><ul><li><a href=#design-document>Design Document</a></li><li><a href=#prototype>Prototype</a><ul><li><a href=#recommended-tech-stack>Recommended Tech Stack</a></li><li><a href=#keep-in-mind>Keep in mind</a></li></ul></li></ul></li><li><a href=#outcome>Outcome</a><ul><li><a href=#youll-learn>You&rsquo;ll learn</a></li></ul></li><li><a href=#share-and-shoutout>Share and shoutout</a></li></ul><h1 id=problem-statement>Problem Statement
<a class=anchor href=#problem-statement>#</a></h1><p>Imagine you have a publishing platform where writers write articles and readers read them. To appreciate the quality content, the readers <em>clap</em> for the article by clicking the clap button present next to the article.</p><p><img src=https://user-images.githubusercontent.com/4745789/137951051-3d18a202-e719-4e9c-a430-d8da6ddebaec.png alt="Designing Realtime Claps">
The clap button looks as shown above and the number <code>156</code> beneath it is the total number of claps the article has received to date. When any user (reader or writer) opens the page the total clap count it fetched from the database and rendered on the page.</p><p>Design a realtime gratification system, that updates the <em>clap</em> count as soon as someone clapped for the article; which means all the users who are reading the same article at the same time should, in realtime, see that someone else clapped for the article.</p><h1 id=requirements>Requirements
<a class=anchor href=#requirements>#</a></h1><p><em>The problem statement is something to start with, be creative and dive into the product details and add constraints and features you think would be important.</em></p><h2 id=core-requirements>Core Requirements
<a class=anchor href=#core-requirements>#</a></h2><ul><li>multiple readers reading the same article</li><li>when one reader <em>claps</em> an article, other readers get an realtime update</li><li>the clap count on an article to update in realtime</li><li><strong>100,000</strong> concurrent users on the platform</li><li><strong>10,000</strong> concurrent users reading the same article (at peak)</li></ul><h2 id=high-level-requirements>High Level Requirements
<a class=anchor href=#high-level-requirements>#</a></h2><ul><li>make your high-level components operate with <strong>high availability</strong></li><li>ensure that the data in your system is <strong>durable</strong>, not matter what happens</li><li>define how your system would behave while <strong>scaling-up</strong> and <strong>scaling-down</strong></li><li>make your system <strong>cost-effective</strong> and provide a justification for the same</li><li>describe how <strong>capacity planning</strong> helped you made a good design decision</li><li>think about how other services will interact with your service</li></ul><h2 id=micro-requirements>Micro Requirements
<a class=anchor href=#micro-requirements>#</a></h2><ul><li>ensure the data in your system is <strong>never</strong> going in an inconsistent state</li><li>ensure your system is <strong>free of deadlocks</strong> (if applicable)</li><li>ensure that the throughput of your system is not affected by <strong>locking</strong>, if it does, state how it would affect</li></ul><h1 id=output>Output
<a class=anchor href=#output>#</a></h1><h2 id=design-document>Design Document
<a class=anchor href=#design-document>#</a></h2><p>Create a <strong>design document</strong> of this system/feature stating all critical design decisions, tradeoffs, components, services, and communications. Also specify how your system handles at scale, and what will eventually become a chokepoint.</p><p>Do <strong>not</strong> create unnecessary components, just to make design look complicated. A good design is <strong>always simple and elegant</strong>. A good way to think about it is if you were to create a spearate process/machine/infra for each component and you will have to code it yourself, would you still do it?</p><h2 id=prototype>Prototype
<a class=anchor href=#prototype>#</a></h2><p>To understand the nuances and internals of this system, build a prototype that</p><ul><li>build an interface allowing multiple readers read an article</li><li>place a button and a clap counter next to the article&rsquo;s body</li><li>when one user clicks the clap button, the count updates in the database</li><li>the event is then sent to all the readers reading the same article</li></ul><h3 id=recommended-tech-stack>Recommended Tech Stack
<a class=anchor href=#recommended-tech-stack>#</a></h3><p>This is a recommended tech-stack for building this prototype</p><table><thead><tr><th>Which</th><th>Options</th></tr></thead><tbody><tr><td>Language</td><td>NodeJS, any other that supports socket IO</td></tr><tr><td>Database</td><td>MongoDB, MySQL, any of your liking</td></tr><tr><td>Library</td><td>SocketIO</td></tr></tbody></table><h3 id=keep-in-mind>Keep in mind
<a class=anchor href=#keep-in-mind>#</a></h3><p>These are the common pitfalls that you should keep in mind while you are building this prototype</p><ul><li>IO calls in NodeJS are asynchronous</li><li>if you are broadcasting the status update, do not do it to &ldquo;all&rdquo; the users</li></ul><h1 id=outcome>Outcome
<a class=anchor href=#outcome>#</a></h1><h2 id=youll-learn>You&rsquo;ll learn
<a class=anchor href=#youll-learn>#</a></h2><ul><li>realtime communication through SocketIO</li><li>database schema design and deciding what data to store to make this efficient</li><li>optimizing by batching</li></ul><h1 id=share-and-shoutout>Share and shoutout
<a class=anchor href=#share-and-shoutout>#</a></h1><p>If you find this assignment helpful, please</p><ul><li>share this assignment with your friends and peers</li><li>star this repository and help it reach a wider audience</li><li>give me a shoutout on Twitter <a href=https://twitter.com/@arpit_bhayani>@arpit_bhayani</a>, or on LinkedIn at <a href=https://www.linkedin.com/in/arpitbhayani/>@arpitbhayani</a>.</li></ul><p>This assignment is part of <a href=https://arpitbhayani.me/masterclass>Arpit&rsquo;s System Design Masterclass</a> - A masterclass that helps you become great at designing scalable, fault-tolerant, and highly available systems.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#core-requirements>Core Requirements</a></li><li><a href=#high-level-requirements>High Level Requirements</a></li><li><a href=#micro-requirements>Micro Requirements</a></li></ul><ul><li><a href=#design-document>Design Document</a></li><li><a href=#prototype>Prototype</a><ul><li><a href=#recommended-tech-stack>Recommended Tech Stack</a></li><li><a href=#keep-in-mind>Keep in mind</a></li></ul></li></ul><ul><li><a href=#youll-learn>You&rsquo;ll learn</a></li></ul></nav></div></aside></main></body></html>